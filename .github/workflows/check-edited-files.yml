permissions:
  contents: write

on:
  push:

jobs:
  changes_job:
    name: Check py changes
    runs-on: ubuntu-latest
    outputs:
      result: ${{ needs.steps.check-change.outputs.my_changes }}
    permissions:
      contents: write
      pull-requests: write
    steps:
      - uses: actions/checkout@v4
      
      - uses: dorny/paths-filter@v3
        id: check-change
        with:
          filters: |
            my_changes:
              - 'folder/**/*.py'

      - name: check output
        env: 
          MYOUTPUT: ${{ steps.check-change.outputs.my_changes }}
        run: echo $MYOUTPUT

  test-job:
    name: Test Job
    runs-on: ubuntu-latest
    permissions:
      contents: write
      pull-requests: write
    env:
      ANYCHANGE: ${{ needs.changes_job.outputs.result }}

    steps:
      - name: Print my-changes aka. ANYCHANGE
        run: |
          echo "anychange: $ANYCHANGE"
